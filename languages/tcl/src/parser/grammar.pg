# $Id$

=begin overview

This is the grammar for tcl written as a sequence of Perl 6 rules.
Note that this isn't tcl's true grammar, we're cheating a bit to
pretend the builtins are part of the grammar, when we know they're
not. We'll eventually remove them if they get redefined.

=end overview

grammar tcl::Grammar is PCT::Grammar;

rule TOP {
    <statement>*
    [ $ || <panic: 'Syntax error'> ]
    {*}
}

##  this <ws> rule treats # as "comment to eol"
##  you may want to replace it with something appropriate
token ws {
    <!ww>
    [ '#' \N* \n? | \s+ ]*
}

rule statement {
    'puts' '-nonewline'? <value> ';'
    {*}
}

rule value {
    | <integer> {*}                              #= integer
    | <quote> {*}                                #= quote
}

rule integer { \d+ {*} }

rule quote {
    [ \" <string_literal: '"' > \" ]
    {*}
}

##  terms
token term {
    | <value> {*}                                #= value
}

rule expression is optable { ... }
